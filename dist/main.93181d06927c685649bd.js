(()=>{"use strict";var e={91:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},508:(e,t,r)=>{e.exports=r.p+"3ea2d24557751f09a4c2.ico"}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),r.b=document.baseURI||self.location.href,(()=>{var e=r(91),t=r.n(e),i=new URL(r(508),r.b);t()(i);const s=function(e,t){let r=!0;const i=Array(t).fill(!1),s=e.toLowerCase().split(" ").join("-");return Object.freeze({get name(){return e},get id(){return s},get length(){return t},get isHorizontal(){return r},get hits(){return i},hit:e=>{i[e]=!0},isSunk:()=>i.every((e=>e)),toggleOrientation:()=>{r=!r}})},a=10,n=[{name:"Destroyer",id:"destroyer",length:2},{name:"Cruiser",id:"cruiser",length:3},{name:"Submarine",id:"submarine",length:3},{name:"Battleship",id:"battleship",length:4},{name:"Carrier",id:"carrier",length:5}];function o(){return[Math.floor(Math.random()*a),Math.floor(Math.random()*a)]}const l=function(e,t="human"){let r=1===e;const i="computer"===t;let a=n.map((e=>s(e.name,e.length)));const l=e=>{r=e},d=e=>{const[t,r]=o();e.isValidAttack(t,r)?e.receiveAttack(t,r):d(e)},c=()=>{a=n.map((e=>s(e.name,e.length)))};return Object.freeze({get turn(){return r},get isAi(){return i},get ships(){return a},toggleTurn:()=>{r=!r},setTurn:l,attack:(e,t,r)=>{e.receiveAttack(t,r)},randomAttack:d,autoPlaceAllShips:e=>{a.forEach((t=>{e.autoPlaceShip(t)}))},invertShips:()=>{a.forEach((e=>{e.toggleOrientation()}))},resetShips:c,reset:()=>{c(),l(1===e)}})},d=function(){let e=Array(a).fill(0).map((e=>Array(a).fill("empty"))),t=[];const r=(t,r,i)=>((e,t,r)=>{if(e.isHorizontal){if(a-r>=e.length)return!0}else if(a-t>=e.length)return!0;return!1})(t,r,i)&&((t,r,i)=>{let s=!0;if(t.isHorizontal){for(let a=0;a<t.length;a++)if(e[r][i+a].ship){s=!1;break}}else for(let a=0;a<t.length;a++)if(e[r+a][i].ship){s=!1;break}return s})(t,r,i),i=(r,i,s)=>{if(r.isHorizontal)for(let t=0;t<r.length;t++)e[i][s+t]={ship:r,hit:!1,index:t};else for(let t=0;t<r.length;t++)e[i+t][s]={ship:r,hit:!1,index:t};t.push(r)},s=e=>{const[t,a]=o();1===Math.floor(2*Math.random())&&e.toggleOrientation(),r(e,t,a)?i(e,t,a):s(e)};return Object.freeze({get board(){return e},get placedShips(){return t},isValidPosition:r,placeShip:i,autoPlaceShip:s,receiveAttack:(t,r)=>{if(e[t][r].ship){const i=e[t][r].ship,s=e[t][r].index;i.hit(s),e[t][r].hit=!0}else e[t][r]="miss"},areShipsSunk:()=>t.every((e=>e.hits.every((e=>e)))),isValidAttack:(t,r)=>!e[t][r].hit&&"miss"!==e[t][r],reset:()=>{e=Array(a).fill(0).map((e=>Array(a).fill("empty"))),t=[]}})},c={p1Grid:document.querySelector(".p1-grid"),p2Grid:document.querySelector(".p2-grid"),shipsContainer:document.querySelector(".ships-container"),controlBtns:document.querySelector(".control-buttons"),startBtn:document.querySelector("#start-btn"),autoPlaceBtn:document.querySelector("#auto-place-btn"),changeOrientationBtn:document.querySelector("#change-orientation-btn"),resetBtn:document.querySelector("#reset-btn"),playAgainBtn:document.querySelector("#play-again-btn"),playerNames:document.querySelectorAll(".player-name"),modalBg:document.querySelector(".modal-bg"),modelText:document.querySelector(".modal-text")},h=(()=>{const e=e=>{e.textContent=""};return Object.freeze({renderGrid:(t,r,i)=>{e(r);for(let e=0;e<a;e++)for(let s=0;s<a;s++){const a=document.createElement("div"),n=t[e][s];if(a.classList.add("grid-cell"),a.dataset.y=e,a.dataset.x=s,"miss"===n)a.classList.add("miss");else if(n.ship)if(n.hit)a.classList.add("danger");else if(!i){const e=document.createElement("div");e.classList.add("placed-ship-square"),a.appendChild(e)}r.appendChild(a)}},createShips:e=>{n.forEach(((t,r)=>{const i=document.createElement("div");i.classList.add("ship",t.id),i.draggable=!0,i.dataset.index=r;for(let e=0;e<t.length;e++){const r=document.createElement("div");r.classList.add("ship-square",`${t.id}-${e}`),r.dataset.index=e,i.appendChild(r)}e.appendChild(i)}))},changeOrientation:()=>{c.shipsContainer.classList.toggle("horizontal"),c.shipsContainer.classList.toggle("vertical")},resetOrientation:()=>{c.shipsContainer.classList.add("horizontal"),c.shipsContainer.classList.remove("vertical")},clearGrid:e,hideShips:()=>{document.querySelectorAll(".ship").forEach((e=>{e.classList.add("removed")}))},showShips:()=>{document.querySelectorAll(".ship").forEach((e=>{e.classList.remove("removed")}))},showModal:e=>{c.modelText.textContent=e,c.modalBg.style.display="flex"},hideModal:()=>{c.modelText.textContent="",c.modalBg.style.display="none"},showPlayAgainButton:()=>{c.playAgainBtn.classList.remove("invisible")},hidePlayAgainButton:()=>{c.playAgainBtn.classList.add("invisible")},startGame:()=>{c.p2Grid.classList.remove("invisible"),c.shipsContainer.classList.add("invisible"),c.controlBtns.classList.add("invisible"),c.startBtn.classList.add("invisible"),c.playerNames.forEach((e=>{e.classList.remove("invisible")}))},resetGame:()=>{c.p2Grid.classList.add("invisible"),c.shipsContainer.classList.remove("invisible"),c.controlBtns.classList.remove("invisible"),c.startBtn.classList.remove("invisible"),c.playerNames.forEach((e=>{e.classList.add("invisible")}))}})})();(()=>{const e=l(1),t=l(2,"computer"),r=d(),i=d(),s=((e,t,r)=>{let i,s,a=[];const n=()=>{a.forEach((e=>{e.classList.remove("success")})),a=[]},o=()=>{i=null},l=e=>{s=e.target.dataset.index},d=e=>{i=e.target,setTimeout((()=>{i.classList.add("invisible")}),0)},c=e=>{e.target.classList.remove("invisible"),n(),o()},u=e=>{e.preventDefault()},p=o=>{if(o.preventDefault(),i){const l=o.target,d=l.dataset.y,c=l.dataset.x,h=e.ships[i.dataset.index],u=d-(h.isHorizontal?0:s),p=c-(h.isHorizontal?s:0);if(t.isValidPosition(h,u,p))if(n(),h.isHorizontal)for(let e=0;e<h.length;e++)r.childNodes[10*u+p+e].classList.add("success"),a.push(r.childNodes[10*u+p+e]);else for(let e=0;e<h.length;e++)r.childNodes[10*(u+e)+p].classList.add("success"),a.push(r.childNodes[10*(u+e)+p])}},g=e=>{},m=s=>{if(a.length>0&&i){const s=Number(a[0].dataset.y),n=Number(a[0].dataset.x),l=e.ships[i.dataset.index];t.isValidPosition(l,s,n)&&(t.placeShip(l,s,n),h.renderGrid(t.board,r,!1),v(),i.classList.add("removed"),o())}},f=()=>{document.querySelectorAll(".ship").forEach((e=>{e.addEventListener("dragstart",d),e.addEventListener("dragend",c),e.addEventListener("mousedown",l)}))},v=()=>{r.querySelectorAll(".grid-cell").forEach((e=>{e.addEventListener("dragover",u),e.addEventListener("dragenter",p),e.addEventListener("dragleave",g),e.addEventListener("drop",m)}))};return Object.freeze({addDragDropListeners:()=>{f(),v()},addShipListeners:f,addGridCellListeners:v})})(e,r,c.p1Grid),a=()=>{e.invertShips(),h.changeOrientation()},o=()=>{r.reset(),e.autoPlaceAllShips(r),h.hideShips(),h.renderGrid(r.board,c.p1Grid,!1),s.addDragDropListeners()},u=()=>{r.reset(),e.resetShips(),h.resetOrientation(),h.renderGrid(r.board,c.p1Grid,!1),s.addGridCellListeners(),h.showShips()},p=()=>{e.reset(),t.reset(),r.reset(),i.reset(),h.resetGame(),h.resetOrientation(),h.showShips(),h.renderGrid(r.board,c.p1Grid),h.renderGrid(i.board,c.p2Grid),h.hideModal(),s.addGridCellListeners()},g=e=>{e.target.classList.contains("modal-bg")&&h.hideModal()},m=s=>{const a=s.currentTarget,n=a.dataset.y,o=a.dataset.x;if(e.turn&&i.isValidAttack(n,o)&&(e.attack(i,n,o),e.toggleTurn(),t.toggleTurn(),h.renderGrid(i.board,c.p2Grid,!0),v()),i.areShipsSunk()){const e="Player 1 Wins";return h.showPlayAgainButton(),void h.showModal(e)}if(t.turn&&(t.randomAttack(r),setTimeout((()=>{h.renderGrid(r.board,c.p1Grid,!1),e.toggleTurn()}),250),t.setTurn(!1)),r.areShipsSunk()){const e="Player 2 Wins";return h.showPlayAgainButton(),void h.showModal(e)}},f=()=>{r.placedShips.length===n.length?(v(),t.autoPlaceAllShips(i),h.startGame()):(h.hidePlayAgainButton(),h.showModal("Place all your ships"))},v=()=>{c.p2Grid.querySelectorAll(".grid-cell").forEach((e=>{e.addEventListener("click",m)}))};return Object.freeze({init:()=>{h.renderGrid(r.board,c.p1Grid,!1),h.renderGrid(i.board,c.p2Grid,!0),h.createShips(c.shipsContainer),s.addDragDropListeners(),c.changeOrientationBtn.addEventListener("click",a),c.autoPlaceBtn.addEventListener("click",o),c.resetBtn.addEventListener("click",u),c.startBtn.addEventListener("click",f),c.modalBg.addEventListener("click",g),c.playAgainBtn.addEventListener("click",p)}})})().init()})()})();